<!DOCTYPE html>
<html lang="en">
<head>
	<title>Login V1</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">	
	<link rel="icon" type="image/png" href="/static/Login_v1/images/icons/favicon.ico"/>
	<link rel="stylesheet" type="text/css" href="/static/Login_v1/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/static/Login_v1/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/static/Login_v1/vendor/animate/animate.css">	
	<link rel="stylesheet" type="text/css" href="/static/Login_v1/vendor/css-hamburgers/hamburgers.min.css">
	<link rel="stylesheet" type="text/css" href="/static/Login_v1/vendor/select2/select2.min.css">
	<link rel="stylesheet" type="text/css" href="/static/Login_v1/css/util.css">
	<link rel="stylesheet" type="text/css" href="/static/Login_v1/css/main.css">
</head>
<style>
    .table-sortable {
        cursor: pointer;
    }
    .table-sortable .th-sort-asc::after{
        content: "\25b4";
    }
    .table-sortable .th-sort-desc::after{
        content: "\25be";
    }
    .table-sortable .th-sort-asc::after, .table-sortable .th-sort-asc::after
    {
        margin-left: 5px;

    }
    .table-sortable .th-sort-asc, .th-sort-desc{
        background: rgba(0,0,0,0.1);
    }
</style>
<body>
	
	<div class="limiter">
        <div style = "padding:10%; border-color: solid black" >
                <form action="/delete-issue" class = "login100-form" method='POST'>
                    <p></p>
                    <br><br><br>
					<span class="login100-form-title">
						Issues
					</span>

					<table id="course-details" class = " table table-dark table-sortable"" style="width: 100px; size: 10%" align = "center">
                        <thead>
                        <tr>
                            <th>issue_id</th>
                            <th>faculty_id</th>
                            <th>date_of_class</th>
                            <th>hour_of_issue</th>
                            <th>status of issue</th>
                            <th>   DELETE   </th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in res %}
                        <tr>
                            
                            <td align="center" >{{row.issue_id}}</td>
                            <td align="center" >{{row.student_id}}</td>
                            <td align="center">{{row.date_of_issue}}</td>
                            <td align="center">{{row.hour_of_issue}}</td>
                            <td align="center">{{row.status_of_issue}}</td>
                            {%if row.status_of_issue =='Ongoing' %}
                            <td align="center"><label><input type="checkbox" name="check" value={{row.issue_id}}> </label></td><br>
                            {% endif %}
                               
                        </tr>
                        {% endfor %}
                    </tbody>
                      
                    </table>
                   
                    <div class="container-login100-form-btn">
                        <input type="submit" value="DELETE" class="login100-form-btn">
                    </div>

                </form>
            </div>   
		
	
	</div>
	<script>
        function sortTableByColumn(table, column, asc = true){
            const dirModifier = asc ? 1 : -1;
            const tBody = table.tBodies[0];
            const rows = Array.from(tBody.querySelectorAll("tr"));
            const sortedRows = rows.sort((a, b) => {
                    console.log(a);
                    console.log(b);
                    const aColText = a.querySelector(`td:nth-child(${column + 1})`).textContent.trim();
                    const bColText = b.querySelector(`td:nth-child(${column + 1})`).textContent.trim();
                    console.log(aColText);
                    console.log(bColText);
                    //sort each row
                    return aColText > bColText ? (1 * dirModifier): (-1 * dirModifier);
                    
            });
            //remove the pre-existing data
            while(tBody.firstChild)
                    {
                        tBody.removeChild(tBody.firstChild);
        
                    }
        
                    //insert the sorted data into the body
                    tBody.append(...sortedRows);
            console.log(sortedRows);
            //remember the sort order
            table.querySelectorAll("th").forEach(th => th.classList.remove("th-sort-asc", "th-sort-desc"));
            table.querySelector(`th:nth-child(${column +1})`).classList.toggle("th-sort-asc", asc);
            table.querySelector(`th:nth-child(${column +1})`).classList.toggle("th-sort-desc", !asc);
        
        }
        //sortTableByColumn(document.querySelector("table"), 1, true);
        //toggling between ascending and descending ordering
        document.querySelectorAll(".table-sortable th").forEach(headerCell => {
            headerCell.addEventListener("click", ()=>{
                const tableElement = headerCell.parentElement.parentElement.parentElement;
                const headerIndex = Array.prototype.indexOf.call(headerCell.parentElement.children, headerCell);
                const currentIsAscending = headerCell.classList.contains("th-sort-asc");
        
                sortTableByColumn(tableElement, headerIndex, !currentIsAscending);
            });
        });
    </script>
	

	
	<script src="/static/Login_v1/vendor/jquery/jquery-3.2.1.min.js"></script>
	<script src="/static/Login_v1/vendor/bootstrap/js/popper.js"></script>
	<script src="/static/Login_v1/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="/static/Login_v1/vendor/select2/select2.min.js"></script>
	<script src="/static/Login_v1/vendor/tilt/tilt.jquery.min.js"></script>
	<script >
		$('.js-tilt').tilt({
			scale: 1.1
		})
	</script>
	<script src="/static/Login_v1/js/main.js"></script>

</body>
</html>